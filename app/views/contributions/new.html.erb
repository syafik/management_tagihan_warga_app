<div class="row">
  <div class="col-md-8 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">New Contribution Rate</h4>
        <p class="card-description">
          Create a new contribution rate for all blocks or specific block
        </p>
        <%= render 'form', contribution: @contribution %>
      </div>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Rate Hierarchy</h5>
        <p class="card-text">
          The system uses the following hierarchy:
        </p>
        <ol class="small">
          <li><strong>Address-specific rates</strong> (highest priority)</li>
          <li><strong>Block-specific rates</strong> (medium priority)</li>
          <li><strong>Global rates</strong> (default)</li>
        </ol>
        <hr>
        <h6>Current Active Rates</h6>
        <% Contribution.active.limit(5).each do |rate| %>
          <div class="small mb-1">
            <strong><%= number_to_currency(rate.amount, unit: "Rp. ", separator: ",", delimiter: ".") %></strong>
            - <%= rate.block || "All Blocks" %>
            <br>
            <span class="text-muted">from <%= rate.effective_from.strftime('%d %b %Y') %></span>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>