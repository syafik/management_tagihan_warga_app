<div class="table-responsive border rounded p-1">
  <table class="table table-hover" id="table-content">
    <thead>
     <tr>
       <th colspan="7" align="right" style='text-align:center'>
        <% if current_user.is_admin? %>
          <% if !@cash_closed %>
            <a href="<%= new_cash_transaction_path %>" class="btn btn-primary ml-auto mb-3 mb-sm-0"> Buat Transaksi</a>
            <a href="<%= import_data_cash_transactions_path %>" class="btn btn-primary ml-2 mb-3 mb-sm-0"> Import Transaksi</a>
            <a href="<%= close_transaction_cash_transactions_path(@year_selected, @month_selected) %>" class="btn btn-primary ml-2 mb-3 mb-sm-0"> Close Transaksi</a>
          <% end %>
          <a href="<%= show_report_cash_transactions_path('warga',@year_selected, @month_selected) %>" class="btn btn-primary ml-2 mb-3 mb-sm-0"> Lihat Laporan Ke Warga</a>
        <% end %>
       </th>
     </tr>
      <tr>
        <th>No</th>
        <th>Tanggal</th>
        <th>Deskripsi</th>
        <th>Debit</th>
        <th>Kredit</th>
        <th>Group</th>
        <th>PIC</th>
        <% if !@cash_closed %>
          <th>Action</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
    <% @cash_transactions.each_with_index do |ct, i| %>
      <tr>
        <td><%= (i + 1)%> </td>
        <td><%= ct.transaction_date.strftime('%d %B %Y') %></td>
        <td><%= ct.description %></td>
        <% if ct.transaction_type == 1 %>
          <td><%= number_to_currency(ct.total, unit: "Rp. ", separator: ",", delimiter: ".") %></td>
          <td></td>
        <% else %>
          <td></td>
          <td><%= number_to_currency(ct.total, unit: "Rp. ", separator: ",", delimiter: ".") %></td>
        <% end %>
        <td><%= CashTransaction::GROUP.invert[ct.transaction_group] %></td>
        <td><%= ct.pic.try(:name) %></td>
        <% if !@cash_closed %>
          <td>
            <%= link_to 'Lihat', ct, class: 'btn-sm btn-success' %>
            <%= link_to 'Ubah', edit_cash_transaction_path(ct), class: 'btn-sm btn-info'  if current_user.is_admin? %>
            <%= link_to 'Destroy', ct, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn-sm btn-danger'%>
          </td>
        <% end %>
      </tr>
    <% end %>
    <tr>
      <td colspan="3" align='right'><b>TOTAL</b></td>
      <td><b><%= number_to_currency(@debit_total, unit: "Rp. ", separator: ",", delimiter: ".") %></b></td>
      <td><b><%= number_to_currency(@credit_total, unit: "Rp. ", separator: ",", delimiter: ".") %></b></td>
      <td colspan='2'><b>SISA : <%= number_to_currency((@debit_total - @credit_total), unit: "Rp. ", separator: ",", delimiter: ".")   %></b></td>
    </tr>
    </tbody>
  </table>
</div>